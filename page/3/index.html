<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    
    <title>LJ小窝</title>
    
    
        <meta name="keywords" content="LJ小窝">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="勿以恶小而为之 勿以善小而不为">
<meta property="og:type" content="website">
<meta property="og:title" content="LJ小窝">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="LJ小窝">
<meta property="og:description" content="勿以恶小而为之 勿以善小而不为">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LJ小窝">
<meta name="twitter:description" content="勿以恶小而为之 勿以善小而不为">
    

    
        <link rel="alternate" href="/atom.xml" title="LJ小窝" type="application/atom+xml">
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>
</html>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">LJ小窝</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索">
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id="categories">
        <h3 class="widget-title">
            <span>分类</span>
            &nbsp;
            <a id="allExpand" href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            C++语言
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            C++Premer
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            第十三章
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/C++语言/C++Premer/第十三章/拷贝控制/">拷贝控制</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            container
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            deque
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/C++语言/container/deque/deque的实现原理和使用方法详解/">deque的实现原理和使用方法详解</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            list
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/C++语言/container/list/C++标准库中的list的实现原理/">C++标准库中的list的实现原理</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/C++语言/container/容器基本操作/">容器基本操作</a></li>  <li class="file"><a href="/wiki/C++语言/container/forward_list不支持push_back操作/">为什么`forward_list`不支持`push_back`操作？</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/wiki/C++语言/运算符优先级表/">运算符优先级表</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            C语言语法
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/C语言语法/CC_pointer_memry/">二级指针动态申请内存</a></li>  <li class="file"><a href="/wiki/C语言语法/struct_Analize/">struct定义语法</a></li>  <li class="file"><a href="/wiki/C语言语法/union定义/">union定义(转载)</a></li>  <li class="file"><a href="/wiki/C语言语法/堆区（heap）和栈区（stack）的区别/">堆区（heap）和栈区（stack）的区别(转载)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Hybird
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            webview
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/Hybird/webview/gome-Webview/">通用webview开发记录</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            weex
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/Hybird/weex/Weex_six_events/">weex系列抄之一---事件处理</a></li>  <li class="file"><a href="/wiki/Hybird/weex/event-analize/">weex 事件原理分析</a></li>  <li class="file"><a href="/wiki/Hybird/weex/weex-conmunication/">weex 通信原理分析</a></li>  <li class="file"><a href="/wiki/Hybird/weex/weex-debug/">搭建weex断点调试环境</a></li>  <li class="file"><a href="/wiki/Hybird/weex/weex_four/">weex系列抄之四---flex 布局</a></li>  <li class="file"><a href="/wiki/Hybird/weex/weex_one/">weex系列抄之一---环境搭建</a></li>  <li class="file"><a href="/wiki/Hybird/weex/weex_two/">weex系列抄之二---weex原理</a></li>  <li class="file"><a href="/wiki/Hybird/weex/Weex_five/">weex系列抄之四---由 FlexBox 算法强力驱动的 Weex 布局引擎</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            IOS
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Category
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/Category/深入理解Objective-C：Category/">深入理解Objective-C：Category(转载)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            GCD
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/GCD/use-dispatch-semaphore/">dispatch_semaphore 的使用方法</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Mach_O
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/Mach_O/machoviewer/">mach-o Viewer 源码学习</a></li>  <li class="file"><a href="/wiki/IOS/Mach_O/Mach_O_File_Struct/">Mach-o文件结构理解</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Runtime
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/Runtime/Objective-C-消息发送与转发机制原理/">Objective-C 消息发送与转发机制原理</a></li>  <li class="file"><a href="/wiki/IOS/Runtime/runtime1/">runtime1</a></li>  <li class="file"><a href="/wiki/IOS/Runtime/meta_class/">What is a meta-class in Objective-C(译文)</a></li>  <li class="file"><a href="/wiki/IOS/Runtime/神经病院Objective-C-Runtime住院第二天——消息发送与转发（转载/">神经病院Objective-C Runtime住院第二天——消息发送与转发（转载)</a></li>  <li class="file"><a href="/wiki/IOS/Runtime/神经病院Objective-C-Runtime入院第一天——isa和Class/">神经病院Objective-C Runtime入院第一天——isa和Class(转载)</a></li>  <li class="file"><a href="/wiki/IOS/Runtime/神经病院Objective-C-Runtime出院第三天——如何正确使用Runtime-转载/">神经病院Objective-C Runtime出院第三天——如何正确使用Runtime(转载)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            crash
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/crash/Analize_Crash/">收集、符号化IOS崩溃日志</a></li>  <li class="file"><a href="/wiki/IOS/crash/KSCrash_Analize/">KSCrash崩溃收集原理浅析</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            foundation使用记录
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/foundation使用记录/NSInvocation的基本使/">NSInvocation的基本使</a></li>  <li class="file"><a href="/wiki/IOS/foundation使用记录/NSDateFormatter时间格式/">NSDateFormatter 时间格式</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            事件处理
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/事件处理/iOS事件处理/">iOS事件处理看我就够了(转载)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            内存管理
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/内存管理/内存学习/">内存学习</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            动态库
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/动态库/static_lib_aggregate_script/">合并真机模拟器静态库(转载)</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            开源库学习
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            fishhook
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/开源库学习/fishhook/fishHookPicture/">图解fishhook</a></li>  <li class="file"><a href="/wiki/IOS/开源库学习/fishhook/learn_fishhook/">fishhook学习记录</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            暂无分类
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/暂无分类/指定初始化函数/">正确使用NS_DESIGNATED_INITIALIZER</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            虚拟内存
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/IOS/虚拟内存/虚拟内存/">虚拟内存之一----关于</a></li>  <li class="file"><a href="/wiki/IOS/虚拟内存/虚拟内存之2/">查看虚拟内存</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            JS
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/JS/flexBox/">flexBox 伸缩盒子模型</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            工具
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Cocoapods
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/Cocoapods/Cocoapods-new-spec/">Cocoapods-new-spec</a></li>  <li class="file"><a href="/wiki/工具/Cocoapods/cocoapod-learn-install/">cocoapod学习 安装和使用（1）</a></li>  <li class="file"><a href="/wiki/工具/Cocoapods/cocoapod-private-repo/">创建私有仓库</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            IOS模拟器安装app
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/IOS模拟器安装app/IOS_simulator_install_app/">给IOS模拟器按照APP</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            SSH
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/SSH/ssh-theory/">图解SSH原理</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Xcode编译常量
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/Xcode编译常量/xcode编译环境变量/">Xcode编译环境变量</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            git
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            git简略版
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/git/git简略版/git简略版/">Git笔记</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            git详细记录
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/git/git详细记录/git仓库/">Git仓库(转载)</a></li>  <li class="file"><a href="/wiki/工具/git/git详细记录/git分支管理/">Git分支管理(转载)</a></li>  <li class="file"><a href="/wiki/工具/git/git详细记录/git工作区/">git时光穿梭(转载)</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            hexo
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/hexo/hexo-use/">hexo使用指南</a></li>  <li class="file"><a href="/wiki/工具/hexo/自己搭建博客的经历/">自己搭建博客的经历</a></li>  <li class="file"><a href="/wiki/工具/hexo/LaTex/">支持LaTEX的hexo博客</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            markdowm
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/markdowm/Markdown公式编辑学习笔记/">Markdown公式编辑</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            ruby
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/ruby/homebrew-gem使用/">homebrew-gem使用.</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            工具下载地址
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/工具/工具下载地址/工具下载地址/">工具下载地址</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            数据知识
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/数据知识/数学基础知识/">数学知识一对数指数</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            编程基础
                        </a>
                         <ul class="unstyled" id="tree"> 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            正则表达式
                        </a>
                         <ul class="unstyled" id="tree">  <li class="file"><a href="/wiki/编程基础/正则表达式/正则表达式学习/">正则表达式学习摘要</a></li>  </ul> 
                    </li> 
                     </ul> 
                    </li> 
                     </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main">
        <article id="post-Hybird/weex/weex_two" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Hybird/">Hybird</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Hybird/weex/">weex</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/weex/">weex</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/Hybird/weex/weex_two/">
            <time datetime="2018-05-04T04:07:12.000Z" itemprop="datePublished">2018-05-04</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/Hybird/weex/weex_two/">weex系列抄之二---weex原理</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h2 id="关于Weex"><a href="#关于Weex" class="headerlink" title="关于Weex"></a>关于Weex</h2><p>Weex是一套跨平台的动态页面解决方案，让开发者可以用前端的语法写出Native级别的体验，这一点核心功能与React Native是相同的，但RN并不是今天的主角， 这里也不多花笔墨介绍。WEEX宣称「Write Once, Run Everywhere」，同一份代码可以在不同端上运行。Weex是如何做到的呢？</p>
<p>话不多说，先上一张上镜率特别高的流程图，了解一下Weex的工作流程：</p>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex1.jpg" alt=""></p>
<p>在服务端，开发者将写好的Weex文件转换成JS bundle并部署到服务器上供终端下载；终端会在合适的时机拉取JS Bundle，同时利用WeexSDK 中预先准备好的 JavaScript 引擎解析执行JS bundle，在执行过程中通过JS-Native Bridge产生各种终端能够识别的命令进行界面渲染或数据存储、网络通信、调用设备功能、用户交互响应等移动应用的场景实践。</p>
<h2 id="Weex框架"><a href="#Weex框架" class="headerlink" title="Weex框架"></a>Weex框架</h2><p>Weex源码可以在Github(<a href="https://github.com/apache/incubator-weex)上下载到，先看下0.16.1版本下的文件目录结构：" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/apache/incubator-weex)上下载到，先看下0.16.1版本下的文件目录结构：</a></p>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex2.jpg" alt=""></p>
<p>目录的划分比较清楚，一个目录基本就是对应一个功能模块，我们可以对其做一个归类，把它分为三端：JS端、桥接端和纯Native端。见下图：（灰色的方块代表一个文件目录）</p>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex3.jpg" alt=""></p>
<h2 id="JS端"><a href="#JS端" class="headerlink" title="JS端"></a>JS端</h2><p>JS端主要内容是Weex源码中的native-bundle-main.js文件，它提供了一系列Weex的基础JS方法，作用相当于一个库，因此我们又称之为JS Framework。Weex把JS Bundle拆分为基础JS库和业务JS代码， 并把JS库带到安装包中，这样一来，页面请求的JS Bundle就只需要包含业务代码，体积会变得很小，对于加载速度提升大有裨益。JS Framework会在WeexSDK初始化时被加载到内存中。</p>
<h2 id="桥接端（Bridge）"><a href="#桥接端（Bridge）" class="headerlink" title="桥接端（Bridge）"></a>桥接端（Bridge）</h2><p>桥接层负责JS和Native的通信，主要依靠一个全局的JSContext作为媒介。WeexSDK初始化时会往这个全局的JSContext中注入一些方法，举个栗子：</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (void)registerCallNative:(WXJSCallNative)callNative</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">JSValue* </span>(^callNativeBlock)(<span class="keyword">JSValue </span>*, <span class="keyword">JSValue </span>*, <span class="keyword">JSValue </span>*) = ^<span class="keyword">JSValue*(JSValue </span>*<span class="keyword">instance, </span><span class="keyword">JSValue </span>*tasks, <span class="keyword">JSValue </span>*callback)&#123;</span><br><span class="line">        NSString *<span class="keyword">instanceId </span>= [<span class="keyword">instance </span>toString]<span class="comment">;</span></span><br><span class="line">        NSArray *tasksArray = [tasks toArray]<span class="comment">;</span></span><br><span class="line">        NSString *callbackId = [callback toString]<span class="comment">;  </span></span><br><span class="line">      return [<span class="keyword">JSValue </span>valueWithInt32:(int32_t)callNative(<span class="keyword">instanceId, </span>tasksArray, callbackId) inContext:[<span class="keyword">JSContext </span>currentContext]]<span class="comment">;</span></span><br><span class="line">    &#125;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">    _jsContext[@<span class="string">"callNative"</span>] = callNativeBlock</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而终端调用JS也是通过取JSContext对象，调用invokeMethod:withArguments:方法实现。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (JSValue *)callJSMethod:(NSString *)<span class="function"><span class="keyword">method</span> <span class="title">args</span>:</span>(NSArray *)args</span><br><span class="line"><span class="comment">&#123;    </span></span><br><span class="line"><span class="comment">    return [[_jsContext globalObject] invokeMethod:method withArguments:args];</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="纯Native端"><a href="#纯Native端" class="headerlink" title="纯Native端"></a>纯Native端</h2><font color="red">主要的业务都代码都是这一端，包括JS Bundle的请求、UI渲染、性能统计等等。功能层面对其自上而下划分，又可拆分为接口层（Interface）、功能层（Function）、基础层（Basic）。</font>

<p>接口层顾名思义，就是对外暴露API的模块，是最贴近开发者的一层。通过Engine可以对SDK进行初始化，同时注册一些通用的Component和Module，JS Framework会在此时被加载。Controller不必多说，可以使用这个现成的Controller创建一个weex页面，我们需要做的仅仅是传递一个url给它。但如果想要自已实现一个Weex Controller而不是继承它，这个时候就需要用到Model中的WXSDKInstance，Weex渲染过程的各个阶段都会在WXSDKInstance中有回调，JS Bundle的请求也是在这个类中发出。</p>
<p>先绕过功能层，看基础层。基础层提供了一些基础的、与业务无强相关的功能。如Network就是对NSURLSession进行一次再封装，提供基础的下载功能；Event用来定义一些标准手势事件；Layout则是页面布局相关实现，布局引擎采用C语言，可以跨平台使用。Event和Layout最终都服务于Component。</p>
<p>最后是代码最重的功能层，其中Monitor和DevTool是相对比较独立的，Monitor是测速模块，DevTool用来支持远程调试的，可以不集成到代码中，不影响编译，此处不谈。</p>
<p>Module、Component和Handler是Weex三贱客，它们都是采用插件的形式集合到SDK中，很方便扩展。注册的时机也相同，SDK会在初始化时调用registerDefaultModules/Compoents/Handlers加载一些标准的插件。</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)registerDefaults</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">self _registerDefaultComponents</span>];</span><br><span class="line">    [<span class="meta">self _registerDefaultModules</span>];</span><br><span class="line">    [<span class="meta">self _registerDefaultHandlers</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// register some default components when the engine initializes.+ (void)_registerDefaultComponents</span></span><br><span class="line">&#123;</span><br><span class="line">    [self <span class="string">registerComponent:</span>@<span class="string">"container"</span> <span class="string">withClass:</span>NSClassFromString(@<span class="string">"WXDivComponent"</span>) <span class="string">withProperties:</span>nil];</span><br><span class="line">    [self <span class="string">registerComponent:</span>@<span class="string">"div"</span> <span class="string">withClass:</span>NSClassFromString(@<span class="string">"WXComponent"</span>) <span class="string">withProperties:</span>nil];</span><br><span class="line">    [self <span class="string">registerComponent:</span>@<span class="string">"text"</span> <span class="string">withClass:</span>NSClassFromString(@<span class="string">"WXTextComponent"</span>) <span class="string">withProperties:</span>nil];</span><br><span class="line">    [self <span class="string">registerComponent:</span>@<span class="string">"image"</span> <span class="string">withClass:</span>NSClassFromString(@<span class="string">"WXImageComponent"</span>) <span class="string">withProperties:</span>nil];</span><br><span class="line">    ……</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从注册时的命名上不难看出，<font color="red">Component实现的是UIKit的功能。</font>那还有两贱客是干吗的？<font color="red">我们可以认为Module是终端提供给JS的功能模块，为了让JS获得终端的能力，例如网络请求的能力（WXStreamModule）、定时器的能力（WXTimerModule）等。三贱客里，Component和Module都是可以直接和JS通信的，而Handler不行，Handler仅仅作为面向协议编程的一种手段，在纯Native端使用</font>。</p>
<p>Loader就是采用了Handler的形式对Network进行了进一步的再封装，用这种方式会让Loader模块更灵活一些，开发者完全可以通过重新注册Handler来挂载新的网络请求方法，实现一些自定义的功能。</p>
<font color="red">除了Component和Module，还有一个模块可以直接和JS通信，就是结构图中与桥接端相邻的Manager（与桥接端相邻代表二者可以直接通信），Manager模块主要包括WXComponentManager和Factory，WXComponentManager用来做Component的调度，而Factory用来保存Component和Module的配置。</font>

<p>讲完了WeexSDK源码框架，或许读者还是会有不少疑问：说了那么一堆高大上的名词，然并卵，我还是不知道Weex是怎么跑起来的。那我们就更具体一点，去看看Module和Component的世界吧。</p>
<h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>前面有一个高频词汇：注册。<font color="red">所谓注册，其实在实现上就是往全局字典里面以Key-Value的形式保存一些模块的信息。</font>Weex三贱客都需要注册，Handler的注册上文提到过，其实就是以Protocol Name为Key，往全局字典里面写入一个实现了该Protocol的对象。Module和Component的注册则更接近一些，都是以注册时的标签为Key，而保存的value是一个WXInvocationConfig派生类对象，可以瞄一眼WXInvocationConfig携带的信息，包括：标签名、类名、同步方法和异步方法。</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WXInvocationConfig</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSString</span> *clazz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableDictionary</span> *asyncMethods;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableDictionary</span> *syncMethods;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithName:(<span class="built_in">NSString</span> *)name <span class="keyword">class</span>:(<span class="built_in">NSString</span> *)clazz;</span><br><span class="line">- (<span class="keyword">void</span>)registerMethods;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>以WXDomModule为例，在WXDomModule的类实现文件中有一坨被WX_EXPORT_METHOD宏定义包裹的selector：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">createBody</span>:))</span><br><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">addElement</span>:<span class="attribute">element</span>:<span class="attribute">atIndex</span>:))</span><br><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">removeElement</span>:))</span><br><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">moveElement</span>:<span class="attribute">parentRef</span>:<span class="attribute">index</span>:))</span><br><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">addEvent</span>:<span class="attribute">event</span>:))</span><br><span class="line"><span class="selector-tag">WX_EXPORT_METHOD</span>(<span class="variable">@selector</span>(<span class="attribute">removeEvent</span>:<span class="attribute">event</span>:))</span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#define WX_EXPORT_METHOD(<span class="function"><span class="keyword">method</span>) <span class="title">WX_EXPORT_METHOD_INTERNAL</span><span class="params">(<span class="keyword">method</span>,wx_export_method_)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">#<span class="title">define</span> <span class="title">WX_EXPORT_METHOD_INTERNAL</span><span class="params">(<span class="keyword">method</span>, token)</span> \</span></span><br><span class="line"><span class="function">+ <span class="params">(NSString *)</span><span class="title">WX_CONCAT_WRAPPER</span><span class="params">(token, __LINE__)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="function"><span class="comment"> \    return NSStringFromSelector(method); \</span></span></span><br><span class="line"><span class="function"><span class="comment">&#125;</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">#<span class="title">define</span> <span class="title">WX_CONCAT_WRAPPER</span><span class="params">(a, b)</span>    <span class="title">WX_CONCAT</span><span class="params">(a, b)</span></span></span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)wx_export_method_40 &#123;   </span><br><span class="line"> <span class="keyword">return</span> NSStringFromSelector(<span class="meta">@selector(createBody:)</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)registerMethods</span><br><span class="line">&#123;</span><br><span class="line">    Class currentClass = <span class="built_in">NSClassFromString</span>(_clazz);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (currentClass != [<span class="built_in">NSObject</span> <span class="keyword">class</span>]) &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">int</span> methodCount = <span class="number">0</span>;</span><br><span class="line">        Method *methodList = class_copyMethodList(object_getClass(currentClass), &amp;methodCount);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">unsigned</span> <span class="keyword">int</span> i = <span class="number">0</span>; i &lt; methodCount; i++) &#123;</span><br><span class="line">            <span class="built_in">NSString</span> *selStr = [<span class="built_in">NSString</span> stringWithCString:sel_getName(method_getName(methodList[i])) encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">            <span class="built_in">BOOL</span> isSyncMethod = <span class="literal">NO</span>;</span><br><span class="line">            <span class="keyword">if</span> ([selStr hasPrefix:<span class="string">@"wx_export_method_sync_"</span>]) &#123;</span><br><span class="line">                isSyncMethod = <span class="literal">YES</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> ([selStr hasPrefix:<span class="string">@"wx_export_method_"</span>]) &#123;</span><br><span class="line">                isSyncMethod = <span class="literal">NO</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">NSString</span> *name = <span class="literal">nil</span>, *method = <span class="literal">nil</span>;</span><br><span class="line">            SEL selector = <span class="built_in">NSSelectorFromString</span>(selStr);</span><br><span class="line">            <span class="keyword">if</span> ([currentClass respondsToSelector:selector]) &#123;</span><br><span class="line">                method = ((<span class="built_in">NSString</span>* (*)(<span class="keyword">id</span>, SEL))[currentClass methodForSelector:selector])(currentClass, selector);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">NSRange</span> range = [method rangeOfString:<span class="string">@":"</span>];</span><br><span class="line">            <span class="keyword">if</span> (range.location != <span class="built_in">NSNotFound</span>) &#123;</span><br><span class="line">                name = [method substringToIndex:range.location];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                name = method;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">NSMutableDictionary</span> *methods = isSyncMethod ? _syncMethods : _asyncMethods;</span><br><span class="line">            [methods setObject:method forKey:name];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        free(methodList);</span><br><span class="line">        currentClass = class_getSuperclass(currentClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用完registerMethods方法后，WXDomModule的Config包含的信息如下：</p>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex4.jpg" alt=""></p>
<font color="red">同步方法和异步方法存储的Key列表就是JS端可调用的函数名列表。</font>趁热打铁，继续看下JS端是具体是怎么调用这些暴露出去的方法。<br><br>在前文第二节Weex框架中有提到，WeexSDK会在桥接层往JSContext注入一些方法作为JS调用Native的通道，其中callNativeModule方法就是用来调用Native Module的（JS调用Module不仅限于callNativeModule方法）。<br><br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="name">_jsBridge</span> registerCallNativeModule:^NSInvocation*(<span class="name">NSString</span> *instanceId, NSString *moduleName, NSString *methodName, NSArray *arguments, NSDictionary *options) &#123;</span><br><span class="line">    WXSDKInstance *instance = [<span class="name">WXSDKManager</span> instanceForID:instanceId]<span class="comment">;</span></span><br><span class="line">    WXModuleMethod *method = [[<span class="name">WXModuleMethod</span> alloc] initWithModuleName:moduleName methodName:methodName arguments:arguments options:options instance:instance]<span class="comment">; </span></span><br><span class="line">   return [<span class="name">method</span> invoke]<span class="comment">;</span></span><br><span class="line">&#125;]<span class="comment">;</span></span><br></pre></td></tr></table></figure><br><br>| Moudule | 能力<br>| — | — |<br>| WXDomModule | 提供Demo解析能力 |<br>| WXNavigatorModule | 提供控制UI能力 |<br>| WXStreamModule | 提供网络请求能力 |<br>| WXAnimationModule | 提供动画能力<br> |<br>| WXModalUIModule | 提供alert、toast等模态UI展示能力 |<br>| WXWebViewModule | 提供webview基础能力<br> |<br>| WXInstanceWrap | 提供访问终端instance实例能力 |<br>| WXTimerModule | 提供定时器能力 |<br>| WXStorageModule | 提供持久化能力 |<br>| WXClipboardModule | 提供剪切板能力 |<br>| WXGlobalEventModule | 提供全局事件(监听通知)能力 |<br>| WXCanvasModule | 提供绘图能力 |<br>| WXPickerModule | 提供DatePicker和TimePicker能力 |<br>| WXMetaModule | 提供设置视口(viewport)能力 |<br>| WXWebSocketModule | 提供WebSocket能力 |<br>| WXVoiceOverModule | 提供VoiceOver能力 |<br><br>## Component<br><br>理解了Module后再来看一下Component。前面提到过Component的主要作用对应UIKit,每一个Component类就与一种UI类型强相关，如tableView、imageView。Component维护了一个生命周期，这一点跟UIViewController有点相似：<br><br><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex5.jpg" alt=""><br><br>Component的init方法有许多参数要传，包括样式、属性、事件等都可以在初始化时传入；loadView时，WXComponent的派生类需要返回一个UI类型实例，它会被赋值给Component的view属性，跟Component关联起来；loadView之后会走到addEvent，这里允许我们添加一些自定义的事件（常用的单击、长按等事件已经实现，在初始化时传入即可，不需要操作addEvent方法）；在viewDidLoad中可以对view做个性化的配置，然后启动布局。<br><br>Weex允许在view加载出来了以后再去updateStyles/Attributes，JS可以直接访问到这个Component对象。<br><br>JS调用Component的原理和Module基本一样，通过注入的callNativeComponent、callUpdateAttrs等一系列方法，在调用过程中生成一个WXComponentMethod对象，然后再利用NSInvocation invoke触达Native。除此之外，JS还可以通过WXComponentManager间接调用Component。<br><br><font color="red">WXComponentManager是Component的调度器，可以直接和JS通信。注入JSContext的方法中与其相关的有callAddElement、callRemoveElement、callAddEvent等,通过这些方法直接调用WXComponentManager即图示中的链路①。而在首屏渲染时通常走的是链路②，即JS Framework在解析JS Bundle时会先访问WXDomModule，然后再由WXDomModule间接地调用WXComponentManager，两种方式其实没有太大差别，在首屏全部使用WXDomModule会更容易监控Dom解析过程而已。</font>

<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex6.jpg" alt=""></p>
<p>addComponent的作用类似于addSubview，WXComponentManager会先用JS传递过来的componentData创建Component对象，然后再把生成的Component添加到它supercomponent的树结构中，同时把Component关联的view加到视图层级上去，之后再对它的children结点递归调用addComponent。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)<span class="string">_recursivelyAddComponent:</span>(NSDictionary *)componentData <span class="string">toSupercomponent:</span>(WXComponent *)supercomponent <span class="string">atIndex:</span>(NSInteger)index <span class="string">appendingInTree:</span>(BOOL)appendingInTree</span><br><span class="line">&#123;</span><br><span class="line">    WXComponent *component = [self <span class="string">_buildComponentForData:</span>componentData <span class="string">supercomponent:</span>supercomponent];</span><br><span class="line">    [supercomponent <span class="string">_insertSubcomponent:</span>component <span class="string">atIndex:</span>index];</span><br><span class="line">    <span class="keyword">if</span> (!component-&gt;_isTemplate) &#123;</span><br><span class="line">        [supercomponent <span class="string">insertSubview:</span>component <span class="string">atIndex:</span>index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NSArray *subcomponentsData = [componentData <span class="string">valueForKey:</span>@<span class="string">"children"</span>];</span><br><span class="line">    BOOL appendTree = !appendingInTree &amp;&amp; [component.attributes[@<span class="string">"append"</span>] <span class="string">isEqualToString:</span>@<span class="string">"tree"</span>];   </span><br><span class="line">     <span class="comment">// if ancestor is appending tree, child should not be laid out again even it is appending tree.</span></span><br><span class="line">    <span class="keyword">for</span>(NSDictionary *subcomponentData <span class="keyword">in</span> subcomponentsData)&#123;</span><br><span class="line">        [self <span class="string">_recursivelyAddComponent:</span>subcomponentData <span class="string">toSupercomponent:</span>component <span class="string">atIndex:</span><span class="number">-1</span> <span class="string">appendingInTree:</span>appendTree || appendingInTree];</span><br><span class="line">    &#125;</span><br><span class="line">    [component _didInserted];  </span><br><span class="line">      <span class="keyword">if</span> (appendTree) &#123;   </span><br><span class="line">           <span class="comment">// If appending tree，force layout in case of too much tasks piling up in syncQueue</span></span><br><span class="line">        [self _layoutAndSyncUI];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex7.jpg" alt=""></p>
<p>WXComponentManager中会起一个DisplayLink，在每个定时周期循环遍历各个元素，检查是否需要更新布局，需要布局的cssNode会在is_dirty字段标识。<font color="red">如果超过1s没有布局任务，DisplayLink会进入休眠状态直至下一次唤醒。</font></p>
<h2 id="WXSDKInstance"><a href="#WXSDKInstance" class="headerlink" title="WXSDKInstance"></a>WXSDKInstance</h2><font color="red">在了解过Module和Component的大致原理后，对Weex已经有一个基本认知，但距离整个流程跑通还欠缺一点。分散的Module和Component本身是不会工作的，还需要一个动力，这时我们的WXSDKInstance就要粉墨登场了。</font>

<p>还记得最初的那张Weex框架图吗？ WXSDKInstance（在Model模块里）是整个Weex页面加载的起点，它会去服务端请求JS Bundle，没有JS Bundle我们什么事都干不了！</p>
<p>WXSDKInstance下载JS Bundle后，会把它传给JS Framework，JS Framework解析JS Bundle并通过WXDomModule往RootView上渲染视图。每个WXSDKInstance都会绑定一个独立的WXComponentManager。</p>
<p>用图表示的话，流程大概是下面这样子，WXSDKInstace负责串联各部分模块并带动整个流程：</p>
<p><img src="http://of685p9vy.bkt.clouddn.com/hybird/weex/weex8.jpg" alt=""></p>
<p>在一些关键的流程上，WXSDKInstance都会有回调，如图上标注出的onCreate()是在下载完JS Bundle，RootView被创建出时回调；renderFinish()是在首屏Dom解析完成后回调；除此之外，还有onFailed()会在加载失败时回调，onJSRuntimeException()在JS执行异常时回调。这些回调都是对外暴露的，我们可以这些回调上做一些定制化的内容。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://weex-project.io/cn/guide/" rel="external nofollow noopener noreferrer" target="_blank">官方教程</a></li>
<li><a href="http://weex-project.io/cn/references/" rel="external nofollow noopener noreferrer" target="_blank">官方手册</a></li>
<li><a href="https://mp.weixin.qq.com/s/Hh3vXjQ8nZDJny1bd0xYOw" rel="external nofollow noopener noreferrer" target="_blank">企鹅电竞weex实践—— iOS SDK的小九九</a></li>
</ol>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-IOS/事件处理/iOS事件处理" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/IOS/">IOS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/IOS/事件处理/">事件处理</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/事件处理/">事件处理</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/IOS/事件处理/iOS事件处理/">
            <time datetime="2018-04-27T04:07:12.000Z" itemprop="datePublished">2018-04-27</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/IOS/事件处理/iOS事件处理/">iOS事件处理看我就够了(转载)</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                
                <p></p><p>本文转载自<a href="https://www.jianshu.com/p/b0884faae603" rel="external nofollow noopener noreferrer" target="_blank">iOS事件处理，看我就够了~</a></p><p></p>
            
        
        
            </div>   
            <div class="article-more-link">
                <a href="/wiki/IOS/事件处理/iOS事件处理/#more">查看更多</a>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-工具/ruby/homebrew-gem使用" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工具/">工具</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/工具/ruby/">ruby</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/工具/">工具</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/工具/ruby/homebrew-gem使用/">
            <time datetime="2018-04-23T04:07:12.000Z" itemprop="datePublished">2018-04-23</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/工具/ruby/homebrew-gem使用/">homebrew-gem使用.</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                
                <p></p><p>最近使用cocoapod更新repo会报下面错误：</p>
<p>Updating spec repo <code>master</code><br>[!] Failed to connect to GitHub to update the CocoaPods/Specs specs repo - Please check if you are offline, or that GitHub is down</p>
<p>经过查找，发现GitHub在2018年2月23日移除了弱加密标准，导致无法正常连接到GitHub。<a href="https://blog.github.com/2018-02-23-weak-cryptographic-standards-removed/" rel="external nofollow noopener noreferrer" target="_blank">传送门</a>。</p>
<p>解决办法是：升级Cocoapod、openssl、ruby。首先介绍下更新ruby使用的Homebrew。</p><p></p>
            
        
        
            </div>   
            <div class="article-more-link">
                <a href="/wiki/工具/ruby/homebrew-gem使用/#more">查看更多</a>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-C语言语法/堆区（heap）和栈区（stack）的区别" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/C语言语法/">C语言语法</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/C-语言语法/">C 语言语法</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/C语言语法/堆区（heap）和栈区（stack）的区别/">
            <time datetime="2018-04-03T04:07:12.000Z" itemprop="datePublished">2018-04-03</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/C语言语法/堆区（heap）和栈区（stack）的区别/">堆区（heap）和栈区（stack）的区别(转载)</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <a id="more"></a>
<p>（1）申请方式</p>
<p>栈区：由编译器自动分配释放，存放函数的参数值，局部变量值等；</p>
<p>堆区：一般由程序员分配释放（使用new/delete或malloc/free），若程序员不释放，程序结束时可能由OS回收；</p>
<p>（2）操作方式</p>
<p>栈区：操作方式类似于数据结构中的栈；</p>
<p>堆区：不同于数据结构中的堆，分配方式类似于链表。</p>
<p>（3）申请后系统的响应 </p>
<p>栈区：只要栈的剩余空间大于所申请空间，系统将为程序提供内存，否则将报异常提示栈溢出；</p>
<p>堆区：首先应该知道操作系统有一个记录空闲内存地址的链表，当系统收到程序的申请时，会遍历该链表，寻找第一个空间大于所申请空间的堆结点，然后将该结点从空闲结点链表中删除，并将该结点的空间分配给程序，另外，对于大多数系统，会在这块内存空间中的首地址处记录本次分配的大小，这样，代码中的delete语句才能正确的释放本内存空间。另外，由于找到的堆结点的大小不一定正好等于申请的大小，系统会自动的将多余的那部分重新放入空闲链表中。 </p>
<p>（4）申请大小的限制</p>
<p>栈区：在Windows下,栈是向低地址扩展的数据结构，是一块连续的内存的区域。这句话的意思是栈顶的地址和栈的最大容量是系统预先规定好的，在WINDOWS下，栈的大小是2M（也有的说是1M，总之是一个编译时就确定的常数），如果申请的空间超过栈的剩余空间时，将提示overflow。因此，能从栈获得的空间较小。</p>
<p>堆区：堆是向高地址扩展的数据结构，是不连续的内存区域。这是由于系统是用链表来存储的空闲内存地址的，自然是不连续的，而链表的遍历方向是由低地址向高地址。堆的大小受限于计算机系统中有效的虚拟内存。由此可见，堆获得的空间比较灵活，也比较大。</p>
<p>（5）申请效率的比较</p>
<p>栈区：系统自动分配，速度较快。但程序员是无法控制的。</p>
<p>堆区：由new分配的内存，一般速度比较慢，而且容易产生内存碎片,不过用起来最方便. </p>
<p>注意：在WINDOWS下，最好的方式是用VirtualAlloc分配内存，他不是在堆，也不是在栈是直接在进程的地址空间中保留一快内存，虽然用起来最不方便。但是速度快，也最灵活。</p>
<p>（6）堆和栈中的存储内容</p>
<p>栈区：在函数调用时，第一个进栈的是主函数中后的下一条指令（函数调用语句的下一条可执行语句）的地址，然后是函数的各个参数，在大多数的C编译器中，参数是由右往左入栈的，然后是函数中的局部变量。注意静态变量是不入栈的。当本次函数调用结束后，局部变量先出栈，然后是参数，最后栈顶指针指向最开始存的地址，也就是主函数中的下一条指令，程序由该点继续运行。</p>
<p>堆区：一般是在堆的头部用一个字节存放堆的大小。堆中的具体内容有程序员安排。</p>
<p>参考资料</p>
<p><a href="https://blog.csdn.net/shanshanhi/article/details/50904706" rel="external nofollow noopener noreferrer" target="_blank">堆区（heap）和栈区（stack）的区别</a></p>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-IOS/foundation使用记录/NSDateFormatter时间格式" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/IOS/">IOS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/IOS/foundation使用记录/">foundation使用记录</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/NSDateFormatter/">NSDateFormatter</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/IOS/foundation使用记录/NSDateFormatter时间格式/">
            <time datetime="2018-03-22T07:35:49.000Z" itemprop="datePublished">2018-03-22</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/IOS/foundation使用记录/NSDateFormatter时间格式/">NSDateFormatter 时间格式</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h2 id="时间匹配格式"><a href="#时间匹配格式" class="headerlink" title="时间匹配格式"></a>时间匹配格式</h2><caption><a>Date Field Symbol Table</a></caption>

<table>
<thead>
<tr>
<th>Field</th>
<th>Sym.</th>
<th>No.</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>era</td>
<td>G</td>
<td>1..3</td>
<td>AD</td>
<td>Era - Replaced with the Era string for the current date. One to three letters for the abbreviated form, four letters for the long form, five for the narrow form.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Anno Domini</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>A</td>
</tr>
<tr>
<td>year</td>
<td>y</td>
<td>1..n</td>
<td>1996</td>
<td>Year. Normally the length specifies the padding, but for two letters it also specifies the maximum length. Example:</td>
</tr>
<tr>
<td></td>
<td>Y</td>
<td>1..n</td>
<td>1997</td>
<td>Year (in “Week of Year” based calendars). This year designation is used in ISO year-week calendar as defined by ISO 8601, but can be used in non-Gregorian based calendar systems where week date processing is desired. May not always be the same value as calendar year.</td>
</tr>
<tr>
<td></td>
<td>u</td>
<td>1..n</td>
<td>4601</td>
<td>Extended year. This is a single number designating the year of this calendar system, encompassing all supra-year fields. For example, for the Julian calendar system, year numbers are positive, with an era of BCE or CE. An extended year value for the Julian calendar system assigns positive values to CE years and negative values to BCE years, with 1 BCE being year 0.</td>
</tr>
<tr>
<td>quarter</td>
<td>Q</td>
<td>1..2</td>
<td>02</td>
<td>Quarter - Use one or two for the numerical quarter, three for the abbreviation, or four for the full name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Q2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>2nd quarter</td>
</tr>
<tr>
<td></td>
<td>q</td>
<td>1..2</td>
<td>02</td>
<td><strong>Stand-Alone</strong> Quarter - Use one or two for the numerical quarter, three for the abbreviation, or four for the full name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Q2</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>2nd quarter</td>
</tr>
<tr>
<td>month</td>
<td>M</td>
<td>1..2</td>
<td>09</td>
<td>Month - Use one or two for the numerical month, three for the abbreviation, or four for the full name, or five for the narrow name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Sept</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>September</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>S</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>1..2</td>
<td>09</td>
<td><strong>Stand-Alone</strong> Month - Use one or two for the numerical month, three for the abbreviation, or four for the full name, or 5 for the narrow name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Sept</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>September</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>S</td>
</tr>
<tr>
<td></td>
<td>l</td>
<td>1</td>
<td>*</td>
<td>Special symbol for Chinese leap month, used in combination with M. Only used with the Chinese calendar.</td>
</tr>
<tr>
<td>week</td>
<td>w</td>
<td>1..2</td>
<td>27</td>
<td>Week of Year.</td>
</tr>
<tr>
<td></td>
<td>W</td>
<td>1</td>
<td>3</td>
<td>Week of Month</td>
</tr>
<tr>
<td>day</td>
<td>d</td>
<td>1..2</td>
<td>1</td>
<td>Date - Day of the month</td>
</tr>
<tr>
<td></td>
<td>D</td>
<td>1..3</td>
<td>345</td>
<td>Day of year</td>
</tr>
<tr>
<td></td>
<td>F</td>
<td>1</td>
<td>2</td>
<td>Day of Week in Month. The example is for the 2nd Wed in July</td>
</tr>
<tr>
<td></td>
<td>g</td>
<td>1..n</td>
<td>2451334</td>
<td>Modified Julian day. This is different from the conventional Julian day number in two regards. First, it demarcates days at local zone midnight, rather than noon GMT. Second, it is a local number; that is, it depends on the local time zone. It can be thought of as a single number that encompasses all the date-related fields.</td>
</tr>
<tr>
<td>week day</td>
<td>E</td>
<td>1..3</td>
<td>Tues</td>
<td>Day of week - Use one through three letters for the short day, or four for the full name, or five for the narrow name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Tuesday</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>T</td>
</tr>
<tr>
<td></td>
<td>e</td>
<td>1..2</td>
<td>2</td>
<td>Local day of week. Same as E except adds a numeric value that will depend on the local starting day of the week, using one or two letters. For this example, Monday is the first day of the week.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Tues</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Tuesday</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>T</td>
</tr>
<tr>
<td></td>
<td>c</td>
<td>1</td>
<td>2</td>
<td><strong>Stand-Alone</strong> local day of week - Use one letter for the local numeric value (same as ‘e’), three for the short day, or four for the full name, or five for the narrow name.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>3</td>
<td>Tues</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Tuesday</td>
</tr>
<tr>
<td></td>
<td></td>
<td>5</td>
<td>T</td>
</tr>
<tr>
<td>period</td>
<td>a</td>
<td>1</td>
<td>AM</td>
<td>AM or PM</td>
</tr>
<tr>
<td>hour</td>
<td>h</td>
<td>1..2</td>
<td>11</td>
<td>Hour [1-12].</td>
</tr>
<tr>
<td></td>
<td>H</td>
<td>1..2</td>
<td>13</td>
<td>Hour [0-23].</td>
</tr>
<tr>
<td></td>
<td>K</td>
<td>1..2</td>
<td>0</td>
<td>Hour [0-11].</td>
</tr>
<tr>
<td></td>
<td>k</td>
<td>1..2</td>
<td>24</td>
<td>Hour [1-24].</td>
</tr>
<tr>
<td></td>
<td>j</td>
<td>1..2</td>
<td>n/a</td>
<td>This is a special-purpose symbol. It must not occur in patterns, but is reserved for use in APIs doing flexible date pattern generation, and requests the preferred format (12 vs 24 hour) for the language in question.</td>
</tr>
<tr>
<td>minute</td>
<td>m</td>
<td>1..2</td>
<td>59</td>
<td>Minute. Use one or two for zero padding.</td>
</tr>
<tr>
<td>second</td>
<td>s</td>
<td>1..2</td>
<td>12</td>
<td>Second. Use one or two for zero padding.</td>
</tr>
<tr>
<td></td>
<td>S</td>
<td>1..n</td>
<td>3457</td>
<td>Fractional Second - rounds to the count of letters. (example is for 12.34567)</td>
</tr>
<tr>
<td></td>
<td>A</td>
<td>1..n</td>
<td>69540000</td>
<td>Milliseconds in day. This field behaves  _exactly_  like a composite of all time-related fields, not including the zone fields. As such, it also reflects discontinuities of those fields on DST transition days. On a day of DST onset, it will jump forward. On a day of DST cessation, it will jump backward. This reflects the fact that is must be combined with the offset field to obtain a unique local time value.</td>
</tr>
<tr>
<td>zone</td>
<td>z</td>
<td>1..3</td>
<td>PDT _fallbacks: _HPG-8:00 GMT-08:00</td>
<td>Timezone - with the s _pecific non-location format_ . Where that is unavailable, falls back to  _localized GMT format_ . Use one to three letters for the short format or four for the full format. In the short format, metazone names are not used unless the commonlyUsed flag is on in the locale.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Pacific Daylight Time _fallbacks:_  HPG-8:00 GMT-08:00</td>
</tr>
<tr>
<td></td>
<td>Z</td>
<td>1..3</td>
<td>-0800</td>
<td>Timezone - Use one to three letters for RFC 822 format, four letters for the localized GMT format.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>HPG+8:00 _fallbacks:_ GMT-08:00</td>
</tr>
<tr>
<td></td>
<td>v</td>
<td>1</td>
<td>PT</td>
<td>Timezone - with the  _generic_   _non-location format_ . Where that is unavailable, uses special fallback rules given in  _[Appendix J][6]_ . Use one letter for short format, four for long format.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>Pacific Time _fallbacks:_ Pacific Time (Canada) Pacific Time (Yellowknife) United States (Los Angeles) Time HPG-8:35 GMT-08:35</td>
</tr>
<tr>
<td></td>
<td>V</td>
<td>1</td>
<td>PST HPG-8:00 GMT-08:00</td>
<td>Timezone - with the same format as z, except that metazone timezone abbreviations are to be displayed if available, regardless of the value of commonlyUsed.</td>
</tr>
<tr>
<td></td>
<td></td>
<td>4</td>
<td>United States (Los Angeles) Time _fallbacks:_  HPG-8:35 MT-08:35</td>
<td>Timezone - with the  _generic_   _location format_ . Where that is unavailable, falls back to the localized GMT format. (Fallback is only necessary with a GMT-style Timezone ID, like Etc/GMT-830.) This is especially useful when presenting possible timezone choices for user selection, since the naming is more uniform than the v format.</td>
</tr>
</tbody>
</table>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a href="http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patternss" rel="external nofollow noopener noreferrer" target="_blank">UNICODE LOCALE DATA MARKUP LANGUAGE (LDML)</a></li>
</ol>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-IOS/暂无分类/指定初始化函数" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/IOS/">IOS</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/IOS/暂无分类/">暂无分类</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/指定初始化函数/">指定初始化函数</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/IOS/暂无分类/指定初始化函数/">
            <time datetime="2018-03-21T04:07:12.000Z" itemprop="datePublished">2018-03-21</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/IOS/暂无分类/指定初始化函数/">正确使用NS_DESIGNATED_INITIALIZER</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <p>本文结束了下指定初始化函数，本文完全转载自 <a href="https://blog.csdn.net/zcube/article/details/51657417" rel="external nofollow noopener noreferrer" target="_blank">正确使用NS_DESIGNATED_INITIALIZER</a> 。</p>
<h2 id="为什么会提到NS-DESIGNATED-INITIALIZER"><a href="#为什么会提到NS-DESIGNATED-INITIALIZER" class="headerlink" title="为什么会提到NS_DESIGNATED_INITIALIZER"></a>为什么会提到NS_DESIGNATED_INITIALIZER</h2><p>============================================================</p>
<p>最近在清理项目警告，遇到了“Method override for the designated initializer”的警告，全称为：</p>
<ul>
<li><p>Method override for the designated initializer of the superclass ‘-init’ not found 或者</p>
</li>
<li><p>Method override for the designated initializer of the superclass ‘-initWithNibName:bundle:’ not found。</p>
</li>
</ul>
<p>经排查是因为头文件中出现NS_DESIGNATED_INITIALIZER 声明的初始化方法，如下：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (instance<span class="keyword">type</span>)initWithPurchaseService:(<span class="type">HTLPrepayPurchaseService</span> *)service <span class="type">NS_DESIGNATED_INITIALIZER</span>;</span><br></pre></td></tr></table></figure>
<p>如果用了NS_DESIGNATED_INITIALIZER，那么警告中出现init、initWithNibName或是其它，取决于你的继承的父类类型：</p>
<p>UIViewController</p>
<ul>
<li><p>Method override for the designated initializer of the superclass ‘-initWithNibName:bundle:’ not found</p>
</li>
<li><p>Method override for the designated initializer of the superclass ‘-initWithCoder:’ not found</p>
</li>
</ul>
<p>UIView</p>
<ul>
<li><p>Method override for the designated initializer of the superclass ‘-initWithFrame:’ not found</p>
</li>
<li><p>Method override for the designated initializer of the superclass ‘-initWithCoder:’ not found</p>
</li>
</ul>
<p>NSObject</p>
<ul>
<li>Method override for the designated initializer of the superclass ‘-init’ not found</li>
</ul>
<h2 id="正确使用NS-DESIGNATED-INITIALIZER"><a href="#正确使用NS-DESIGNATED-INITIALIZER" class="headerlink" title="正确使用NS_DESIGNATED_INITIALIZER"></a>正确使用NS_DESIGNATED_INITIALIZER</h2><h3 id="为什么要用NS-DESIGNATED-INITIALIZER"><a href="#为什么要用NS-DESIGNATED-INITIALIZER" class="headerlink" title="为什么要用NS_DESIGNATED_INITIALIZER"></a>为什么要用NS_DESIGNATED_INITIALIZER</h3><p>Objective-C 中主要通过NS_DESIGNATED_INITIALIZER宏来实现指定构造器的。这里之所以要用这个宏，往往是想<font color="red">告诉调用者要用这个方法去初始化（构造）类对象</font>。</p>
<h3 id="怎样避免使用NS-DESIGNATED-INITIALIZER产生的警告"><a href="#怎样避免使用NS-DESIGNATED-INITIALIZER产生的警告" class="headerlink" title="怎样避免使用NS_DESIGNATED_INITIALIZER产生的警告"></a>怎样避免使用NS_DESIGNATED_INITIALIZER产生的警告</h3><p>如果子类指定了新的初始化器，那么在这个初始化器内部必须调用父类的Designated Initializer。并且需要重写父类的Designated Initializer，将其指向子类新的初始化器。</p>
<p>如下：</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)initWithName:(<span class="built_in">NSString</span> *)name <span class="built_in">NS_DESIGNATED_INITIALIZER</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)init</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> [<span class="keyword">self</span> initWithName:<span class="string">@""</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithName:(<span class="built_in">NSString</span> *)name</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">self</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// do something</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">self</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="更好的做法"><a href="#更好的做法" class="headerlink" title="更好的做法"></a>更好的做法</h3><p>如果定义NS_DESIGNATED_INITIALIZER，大多是不想让调用者调用父类的初始化函数，只希望通过该类指定的初始化进行初始化，这时候就可以用NS_UNAVAILABLE宏。</p>
<p>如下：</p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (instance<span class="keyword">type</span>)init <span class="type">NS_UNAVAILABLE</span>;</span><br><span class="line">- (instance<span class="keyword">type</span>)initWithName:(<span class="type">NSString</span> *)name <span class="type">NS_DESIGNATED_INITIALIZER</span>;</span><br></pre></td></tr></table></figure>
<p>如果调用者使用init 初始化，编译器就会给出一个编译错误。使用NS_UNAVAILABLE后，就不需要在.m中重写父类初始化函数了。如果要允许调用者使用init就需要在.m中重写父类的初始化函数，如上提到的，否则就会报警告。</p>
<h2 id="避免使用new"><a href="#避免使用new" class="headerlink" title="避免使用new"></a>避免使用new</h2><p>如果使用new来创建对象的话，即使init被声明为NS_UNAVAILABLE，也不会收到编译器的警告和错误提示了。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ol>
<li><a href="[http://stackoverflow.com/questions/26185239/ios-designated-initializers-using-ns-designated-initializer]">iOS Designated Initializers : Using NS_DESIGNATED_INITIALIZER
</a>  </li>
</ol>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-工具/工具下载地址/工具下载地址" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工具/">工具</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/工具/工具下载地址/">工具下载地址</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/工具/">工具</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/工具/工具下载地址/工具下载地址/">
            <time datetime="2018-03-13T10:01:31.000Z" itemprop="datePublished">2018-03-13</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/工具/工具下载地址/工具下载地址/">工具下载地址</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                
                <p></p><p>本文记录常用工具下载地址</p><p></p>
            
        
        
            </div>   
            <div class="article-more-link">
                <a href="/wiki/工具/工具下载地址/工具下载地址/#more">查看更多</a>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-工具/Cocoapods/cocoapod-private-repo" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工具/">工具</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/工具/Cocoapods/">Cocoapods</a>
    </div>

                        
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/工具/Cocoapods/cocoapod-private-repo/">
            <time datetime="2018-03-01T06:50:54.000Z" itemprop="datePublished">2018-03-01</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/工具/Cocoapods/cocoapod-private-repo/">创建私有仓库</a>
        </h1>
    

            </header>
        
        
<div class="article-gallery">
    
    <a class="gallery-item" href="http://of685p9vy.bkt.clouddn.com/cocoa-pod/createRepo/privateRepo.png" rel="external nofollow noopener noreferrer" target="_blank">
        <img src="http://of685p9vy.bkt.clouddn.com/cocoa-pod/createRepo/privateRepo.png" itemprop="image">
    </a>
    
</div>

        <div class="article-entry" itemprop="articleBody">
        
        
            
                
                <p></p><p>本文说明制作Cocoapod私有库的过程。本文涉及到两个仓库 ‘官方仓库’、’私有仓库’。</p>
<ol>
<li><a href="https://github.com/CocoaPods/Specs.git" rel="external nofollow noopener noreferrer" target="_blank">官方仓库</a>的作用代表CocoaPods的官方podspec存放地址。 具体可以参考:<a href="https://github.com/CocoaPods/Specs" rel="external nofollow noopener noreferrer" target="_blank">CocoaPods官方源</a>、<a href="http://guides.cocoapods.org/making/specs-and-specs-repo.html" rel="external nofollow noopener noreferrer" target="_blank">Specs</a>; </li>
<li><a href="https://github.com/jianli2017/LJRepo.git" rel="external nofollow noopener noreferrer" target="_blank">私有仓库</a>的是私有podspec存放地址。在git中仓库名称是LJRepo，clone到本地的别名是MyPrivateRepo。后文中私有仓库–LJRepo指的git地址，MyPrivateRepo指的是clone到本地的名称。</li>
</ol><p></p>
            
        
        
            </div>   
            <div class="article-more-link">
                <a href="/wiki/工具/Cocoapods/cocoapod-private-repo/#more">查看更多</a>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-工具/SSH/ssh-theory" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工具/">工具</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/工具/SSH/">SSH</a>
    </div>

                        
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/工具/SSH/ssh-theory/">
            <time datetime="2018-02-27T10:11:35.000Z" itemprop="datePublished">2018-02-27</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/工具/SSH/ssh-theory/">图解SSH原理</a>
        </h1>
    

            </header>
        
        
<div class="article-gallery">
    
    <a class="gallery-item" href="http://of685p9vy.bkt.clouddn.com/ssh/theory/overall.png" rel="external nofollow noopener noreferrer" target="_blank">
        <img src="http://of685p9vy.bkt.clouddn.com/ssh/theory/overall.png" itemprop="image">
    </a>
    
</div>

        <div class="article-entry" itemprop="articleBody">
        
        
            
                
                <p></p><p>SSH是一种协议标准，其目的是实现安全远程登录以及其它安全网络服务。本文转载于<a href="https://www.jianshu.com/p/33461b619d53" rel="external nofollow noopener noreferrer" target="_blank">图解SSH原理</a></p><p></p>
            
        
        
            </div>   
            <div class="article-more-link">
                <a href="/wiki/工具/SSH/ssh-theory/#more">查看更多</a>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <article id="post-工具/Cocoapods/Cocoapods-new-spec" class="article article-type-post" itemscope="" itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/工具/">工具</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/工具/Cocoapods/">Cocoapods</a>
    </div>

                        
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/wiki/工具/Cocoapods/Cocoapods-new-spec/">
            <time datetime="2018-02-27T07:06:13.000Z" itemprop="datePublished">2018-02-27</time>
        </a>
    </div>


                        
                    </div>
                
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/wiki/工具/Cocoapods/Cocoapods-new-spec/">Cocoapods-new-spec</a>
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><blockquote>
<ul>
<li><a href=""></a></li>
<li><a href=""></a></li>
</ul>
</blockquote>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>






    
        <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
        </nav>
    
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            LJ &copy; 2018 
            <a rel="external nofollow noopener noreferrer" href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png"></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten" rel="external nofollow noopener noreferrer" target="_blank">wikitten</a>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript">
    var duoshuoQuery = {short_name:'lijian'};
    (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
    || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>



    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
